<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>OpenANN: Logging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="openann-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenANN
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
   <div id="projectbrief">An open source library for artificial neural networks.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Logging </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>There are several logging mechanisms in OpenANN that are usually used for the internal logging functionality of OpenANN.</p>
<p>However, you can also use these mechanisms for your own programs. All classes and functions that are related to logging are located in the header <a class="el" href="Logger_8h.html">OpenANN/io/Logger.h</a>. We can distinuish two logging approaches in OpenANN: the global logger and local logger objects.</p>
<h1><a class="anchor" id="GlobalLogging"></a>
Global Logger</h1>
<p>You can use the global logger with macros:</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="Logger_8h.html#a6c3a6ff2e478fab3f5bb2e89a820be39" title="Log a debug message. ">OPENANN_DEBUG</a>, <a class="el" href="Logger_8h.html#aaf8810a28fbc8226ffbf01c99477d364" title="Log an info message. ">OPENANN_INFO</a>, <a class="el" href="Logger_8h.html#ac2afdcdb4271e008547730c818b74bdf" title="Log an error message. ">OPENANN_ERROR</a></dd></dl>
<p>These will only output if the current log level is active. You can control the log level by setting the macro OPENANN_LOGLEVEL during compilation to one of</p>
<ul>
<li><a class="el" href="classOpenANN_1_1Log.html#a3ca17978b9cee3a67f86c7fbdc5758ddad3b7910acdbcde922697993e10d8748e" title="Disable logging completely. ">Log::DISABLED</a></li>
<li><a class="el" href="classOpenANN_1_1Log.html#a3ca17978b9cee3a67f86c7fbdc5758dda28b37a06e4eee152afc39a6820182f30" title="Only errors will be logged. ">Log::ERROR</a></li>
<li><a class="el" href="classOpenANN_1_1Log.html#a3ca17978b9cee3a67f86c7fbdc5758ddaa37fbc2c5c2e8c260371f54c279d889c" title="Interesting runtime events. ">Log::INFO</a></li>
<li><a class="el" href="classOpenANN_1_1Log.html#a3ca17978b9cee3a67f86c7fbdc5758ddab69702e6b409f318cf6011990e3f1621" title="Detailed information. ">Log::DEBUG</a></li>
</ul>
<p>Note that once you disabled a log level during compilation you cannot turn it on again. However, you can turn log levels off during runtime with</p>
<div class="fragment"><div class="line"><a class="code" href="classOpenANN_1_1Log.html#ad064b8b69722da409e37df81e95e59fc">OpenANN::Log::getLevel</a>() = <a class="code" href="classOpenANN_1_1Log.html#a3ca17978b9cee3a67f86c7fbdc5758ddaa37fbc2c5c2e8c260371f54c279d889c" title="Interesting runtime events. ">OpenANN::Log::INFO</a>;</div>
</div><!-- fragment --><p>or one of these functions</p>
<div class="fragment"><div class="line"><a class="code" href="classOpenANN_1_1Log.html#aacfec7481f5ff858239e074f544edc08">OpenANN::Log::setDisabled</a>();</div>
<div class="line"><a class="code" href="classOpenANN_1_1Log.html#a4be9255991a917ed9e758918c712992f">OpenANN::Log::setError</a>();</div>
<div class="line"><a class="code" href="classOpenANN_1_1Log.html#a440a449424356a80b78eb2c2ab87769d">OpenANN::Log::setInfo</a>();</div>
<div class="line"><a class="code" href="classOpenANN_1_1Log.html#a8bb7d316dd655fc3387ea867202acfb9">OpenANN::Log::setDebug</a>();</div>
</div><!-- fragment --><p>You can also change the logging target to any std::ostream at runtime with</p>
<div class="fragment"><div class="line"><a class="code" href="classOpenANN_1_1Log.html#a7965e588811ee605a66589b88bf61f24">OpenANN::Log::getStream</a>() = std::cerr;</div>
</div><!-- fragment --><p>To log something you just have to use the stream operator &lt;&lt;:</p>
<div class="fragment"><div class="line"><a class="code" href="Logger_8h.html#a6c3a6ff2e478fab3f5bb2e89a820be39" title="Log a debug message. ">OPENANN_DEBUG</a> &lt;&lt; <span class="stringliteral">&quot;This is a number: &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>;</div>
</div><!-- fragment --><p>The output will have the form</p>
<pre class="fragment">&lt;LEVEL&gt; &lt;DATE&gt; &lt;MSG&gt;
</pre><p>You can set a namespace for each implementation file by setting the macro OPENANN_LOG_NAMESPACE, e.g.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define OPENANN_LOG_NAMESPACE &quot;MyNamespace&quot;</span></div>
</div><!-- fragment --><p>so that the logger will output</p>
<pre class="fragment">&lt;LEVEL&gt; &lt;DATE&gt; &lt;NAMESPACE&gt;: &lt;MSG&gt;
</pre><p>An example is the output of the <a class="el" href="classOpenANN_1_1Optimizer.html" title="The common interface of all optimization algorithms. ">Optimizer</a> <a class="el" href="classOpenANN_1_1LMA.html" title="Levenberg-Marquardt Algorithm. ">LMA</a>:</p>
<pre class="fragment"> DEBUG  2013-05-26 13:33:44  LMA: Iteration #49, training error = 3.0143
</pre><p>This logger is based on the following article: <a href="http://www.drdobbs.com/cpp/logging-in-c/201804215" target="_blank">Logging in C++</a>.</p>
<h1><a class="anchor" id="LogObjects"></a>
Logger Objects</h1>
<p>You can also log information on a local level, i.e. you can specify different targets for different logger objects. You can do this by creating an instance of <a class="el" href="classOpenANN_1_1Logger.html" title="A local logger that can redirect messages to several targets. ">Logger</a>:</p>
<div class="fragment"><div class="line"><a class="code" href="classOpenANN_1_1Logger.html" title="A local logger that can redirect messages to several targets. ">OpenANN::Logger</a> <a class="code" href="agent_8cpp.html#ad6349ecd3290bc2b1caa3b1c6c0c40fc">logger</a>(<a class="code" href="classOpenANN_1_1Logger.html#addcfd83b57d2be2b33e3577e35a8c97aa450ee24b1dcb8356f4cbddfaa2a4dd51" title="Log to file &quot;name&quot;-&quot;time&quot;.log. ">OpenANN::Logger::APPEND_FILE</a>, <span class="stringliteral">&quot;name&quot;</span>);</div>
<div class="line"><a class="code" href="agent_8cpp.html#ad6349ecd3290bc2b1caa3b1c6c0c40fc">logger</a> &lt;&lt; <span class="stringliteral">&quot;This is a number: &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div>
</div><!-- fragment --><p>There is no special formatting like in the global logger. The contant will be passed directly to the encapsulated output stream. This is very useful when you want to log e.g. parameters of a model and restore them afterwards.</p>
<p>Each logger requires a <a class="el" href="classOpenANN_1_1Logger.html#addcfd83b57d2be2b33e3577e35a8c97a" title="Target of the Logger. ">Logger::Target</a>. The output can be redirected to stdout, to a new file or it can be appended to a file. If the target is <a class="el" href="classOpenANN_1_1Logger.html#addcfd83b57d2be2b33e3577e35a8c97aa450ee24b1dcb8356f4cbddfaa2a4dd51" title="Log to file &quot;name&quot;-&quot;time&quot;.log. ">OpenANN::Logger::APPEND_FILE</a>, the name of the logger will be used to determine the logfile. For example, the logfile "name.log" will be used for a logger that has the name "name". If the target was <a class="el" href="classOpenANN_1_1Logger.html#addcfd83b57d2be2b33e3577e35a8c97aa2fd930527d1e5224296128bfe4a31caa" title="Log to file &quot;name&quot;.log. ">OpenANN::Logger::FILE</a>, the corresponding logfile would be "name-time.log" where time is the current time.</p>
<p>The output of all <a class="el" href="classOpenANN_1_1Logger.html" title="A local logger that can redirect messages to several targets. ">Logger</a> objects can be deactivated:</p>
<div class="fragment"><div class="line"><a class="code" href="classOpenANN_1_1Logger.html#adee5fc9ea1e80bfa1ecf9c9a0484512d" title="Deactivate all Logger objects. ">OpenANN::Logger::deactivate</a> = <span class="keyword">true</span>;</div>
</div><!-- fragment --><h1><a class="anchor" id="Formatting"></a>
Formatting</h1>
<p>Both loggers allow to specify the format for floating point numbers by passing a <a class="el" href="structOpenANN_1_1FloatingPointFormatter.html" title="Wraps a value and its precision for logging. ">FloatingPointFormatter</a>:</p>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> myValue = 5.0;</div>
<div class="line"><a class="code" href="Logger_8h.html#a6c3a6ff2e478fab3f5bb2e89a820be39" title="Log a debug message. ">OPENANN_DEBUG</a> &lt;&lt; FloatingPointFormatter(myValue, 2);</div>
</div><!-- fragment --><p>This will print "5.00". </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 9 2014 08:57:52 for OpenANN by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
